{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport axios from 'axios';\nimport getCurrentForecast from './helpers/getCurrentForecast';\nimport getAlertForecast from './helpers/getAlertForecast';\nimport getHourlyForecast from './helpers/getHourlyForecast';\nimport getDailyForecast from './helpers/getDailyForecast';\nimport getDetailCurrentForecast from './helpers/getDetailCurrentForecast';\nconst API_KEY = \"b96cf2201d3a30a9889082d993d5610e\";\nconst BASE_URL = \"https://api.openweathermap.org/data/2.5\"; // const CROSS_URL = \"https://cors-anywhere.herokuapp.com\"\n// const REQUEST_URL = `${CROSS_URL}/${BASE_URL}`;\n\nconst useForecast = () => {\n  _s();\n\n  const [isError, setError] = useState(false);\n  const [isLoading, setLoading] = useState(false);\n  const [forecast, setForecast] = useState(null);\n\n  const getCurrentLocationData = async location => {\n    const allData = await axios(`${BASE_URL}/weather?q=${location}&units=metric&lang=fr&appid=${API_KEY}`);\n\n    if (!allData || allData.length === 0) {\n      console.log('[error] getCurrentLocationData() line 25 in src/useForecast.js');\n      setLoading(false);\n      return;\n    }\n\n    const data = allData.data;\n    return {\n      data\n    };\n  };\n\n  const getDetailLocationData = async (lat, lon) => {\n    const detailData = await axios(`${BASE_URL}/onecall?units=metric&lat=${lat}&lon=${lon}&lang=fr&exclude=minutely&appid=${API_KEY}`);\n\n    if (!detailData || detailData.length === 0) {\n      console.log('[error] getDetailLocationData() line 32 in src/useForecast.js');\n      setLoading(false);\n      return;\n    }\n\n    const data = detailData;\n    return {\n      data\n    };\n  };\n\n  const getLocationBase = async location => {\n    const cityData = await getCurrentLocationData(location);\n\n    if (!cityData.data || cityData.data.length === 0) {\n      console.log('[error] getLocationBase line 41 line 50 in src/useForecast.js');\n      setLoading(false);\n      return;\n    }\n\n    const current_data = cityData.data;\n    const Location_lat = cityData.data.coord.lat;\n    const Location_lon = cityData.data.coord.lon;\n    const cityDetails = await getDetailLocationData(Location_lat, Location_lon);\n    if (!cityDetails.data || cityDetails.data.length === 0) return;\n    const dataObject = {\n      current_data: current_data,\n      cityDetails: cityDetails.data.data\n    };\n    return dataObject;\n  };\n\n  const deployData = data => {\n    const currentForecast = getCurrentForecast(data.current_data);\n    const hourlyForecast = getHourlyForecast(data.cityDetails.hourly);\n    const daylyForecast = getDailyForecast(data.cityDetails.daily);\n    const alertsForecast = getAlertForecast(data.cityDetails.alerts);\n    const detailCurrentForecast = getDetailCurrentForecast(data.cityDetails.daily[0]);\n    setForecast({\n      currentForecast,\n      hourlyForecast,\n      daylyForecast,\n      alertsForecast,\n      detailCurrentForecast\n    });\n    setLoading(false);\n  }; // on submit location recup DATA\n\n\n  const submitRequest = async location => {\n    setLoading(true);\n    setError(false);\n    const response = await getLocationBase(location);\n\n    if (!response || response === 0) {\n      console.log('hi');\n      setError(true);\n      setLoading(false);\n      return;\n    }\n\n    deployData(response);\n  };\n\n  return {\n    isError,\n    isLoading,\n    forecast,\n    submitRequest\n  };\n};\n\n_s(useForecast, \"98jJfAbkRG8B5Phem9UEdOko1FU=\");\n\nexport default useForecast;","map":{"version":3,"sources":["/Users/mohamedelhedihaddar/weather-app/src/useForecast.js"],"names":["useState","axios","getCurrentForecast","getAlertForecast","getHourlyForecast","getDailyForecast","getDetailCurrentForecast","API_KEY","BASE_URL","useForecast","isError","setError","isLoading","setLoading","forecast","setForecast","getCurrentLocationData","location","allData","length","console","log","data","getDetailLocationData","lat","lon","detailData","getLocationBase","cityData","current_data","Location_lat","coord","Location_lon","cityDetails","dataObject","deployData","currentForecast","hourlyForecast","hourly","daylyForecast","daily","alertsForecast","alerts","detailCurrentForecast","submitRequest","response"],"mappings":";;AAAA,SAAQA,QAAR,QAAuB,OAAvB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,kBAAP,MAA+B,8BAA/B;AACA,OAAOC,gBAAP,MAA6B,4BAA7B;AACA,OAAOC,iBAAP,MAA8B,6BAA9B;AACA,OAAOC,gBAAP,MAA6B,4BAA7B;AACA,OAAOC,wBAAP,MAAqC,oCAArC;AAEA,MAAMC,OAAO,GAAG,kCAAhB;AACA,MAAMC,QAAQ,GAAG,yCAAjB,C,CACA;AACA;;AAGA,MAAMC,WAAW,GAAG,MAAM;AAAA;;AAEtB,QAAM,CAACC,OAAD,EAAUC,QAAV,IAAsBX,QAAQ,CAAC,KAAD,CAApC;AACA,QAAM,CAACY,SAAD,EAAYC,UAAZ,IAA0Bb,QAAQ,CAAC,KAAD,CAAxC;AACA,QAAM,CAACc,QAAD,EAAWC,WAAX,IAA0Bf,QAAQ,CAAC,IAAD,CAAxC;;AAGA,QAAMgB,sBAAsB,GAAG,MAAOC,QAAP,IAAmB;AAC9C,UAAMC,OAAO,GAAG,MAAMjB,KAAK,CAAE,GAAEO,QAAS,cAAaS,QAAS,+BAA8BV,OAAQ,EAAzE,CAA3B;;AACA,QAAG,CAACW,OAAD,IAAYA,OAAO,CAACC,MAAR,KAAmB,CAAlC,EAAoC;AAChCC,MAAAA,OAAO,CAACC,GAAR,CAAY,gEAAZ;AACAR,MAAAA,UAAU,CAAC,KAAD,CAAV;AACA;AACH;;AACD,UAAMS,IAAI,GAAGJ,OAAO,CAACI,IAArB;AACA,WAAO;AAACA,MAAAA;AAAD,KAAP;AAEH,GAVD;;AAWA,QAAMC,qBAAqB,GAAG,OAAOC,GAAP,EAAWC,GAAX,KAAkB;AAE5C,UAAMC,UAAU,GAAG,MAAMzB,KAAK,CAAE,GAAEO,QAAS,6BAA4BgB,GAAI,QAAOC,GAAI,mCAAkClB,OAAQ,EAAlG,CAA9B;;AACA,QAAG,CAACmB,UAAD,IAAeA,UAAU,CAACP,MAAX,KAAsB,CAAxC,EAA0C;AACtCC,MAAAA,OAAO,CAACC,GAAR,CAAY,+DAAZ;AACAR,MAAAA,UAAU,CAAC,KAAD,CAAV;AACK;AAAQ;;AACjB,UAAMS,IAAI,GAAGI,UAAb;AACA,WAAO;AAACJ,MAAAA;AAAD,KAAP;AAEH,GAVD;;AAWA,QAAMK,eAAe,GAAG,MAAOV,QAAP,IAAoB;AACxC,UAAMW,QAAQ,GAAG,MAAMZ,sBAAsB,CAACC,QAAD,CAA7C;;AACA,QAAG,CAACW,QAAQ,CAACN,IAAV,IAAkBM,QAAQ,CAACN,IAAT,CAAcH,MAAd,KAAyB,CAA9C,EAAgD;AAC5CC,MAAAA,OAAO,CAACC,GAAR,CAAY,+DAAZ;AACAR,MAAAA,UAAU,CAAC,KAAD,CAAV;AACA;AACH;;AACD,UAAMgB,YAAY,GAAGD,QAAQ,CAACN,IAA9B;AACA,UAAMQ,YAAY,GAAGF,QAAQ,CAACN,IAAT,CAAcS,KAAd,CAAoBP,GAAzC;AACA,UAAMQ,YAAY,GAAGJ,QAAQ,CAACN,IAAT,CAAcS,KAAd,CAAoBN,GAAzC;AAEA,UAAMQ,WAAW,GAAE,MAAMV,qBAAqB,CAACO,YAAD,EAAcE,YAAd,CAA9C;AACE,QAAG,CAACC,WAAW,CAACX,IAAb,IAAqBW,WAAW,CAACX,IAAZ,CAAiBH,MAAjB,KAA4B,CAApD,EAAuD;AAEzD,UAAMe,UAAU,GAAG;AAACL,MAAAA,YAAY,EAAGA,YAAhB;AAA8BI,MAAAA,WAAW,EAAGA,WAAW,CAACX,IAAZ,CAAiBA;AAA7D,KAAnB;AACA,WAAOY,UAAP;AACH,GAhBD;;AAkBA,QAAMC,UAAU,GAAIb,IAAD,IAAS;AAExB,UAAMc,eAAe,GAAGlC,kBAAkB,CAACoB,IAAI,CAACO,YAAN,CAA1C;AACA,UAAMQ,cAAc,GAAGjC,iBAAiB,CAACkB,IAAI,CAACW,WAAL,CAAiBK,MAAlB,CAAxC;AACA,UAAMC,aAAa,GAAGlC,gBAAgB,CAACiB,IAAI,CAACW,WAAL,CAAiBO,KAAlB,CAAtC;AACA,UAAMC,cAAc,GAAGtC,gBAAgB,CAACmB,IAAI,CAACW,WAAL,CAAiBS,MAAlB,CAAvC;AACA,UAAMC,qBAAqB,GAAGrC,wBAAwB,CAACgB,IAAI,CAACW,WAAL,CAAiBO,KAAjB,CAAuB,CAAvB,CAAD,CAAtD;AAEAzB,IAAAA,WAAW,CAAC;AACRqB,MAAAA,eADQ;AAERC,MAAAA,cAFQ;AAGRE,MAAAA,aAHQ;AAIRE,MAAAA,cAJQ;AAKRE,MAAAA;AALQ,KAAD,CAAX;AAOA9B,IAAAA,UAAU,CAAC,KAAD,CAAV;AACH,GAhBD,CA/CsB,CAgEtB;;;AACA,QAAM+B,aAAa,GAAG,MAAM3B,QAAN,IAAiB;AACnCJ,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAF,IAAAA,QAAQ,CAAC,KAAD,CAAR;AACA,UAAMkC,QAAQ,GAAG,MAAMlB,eAAe,CAACV,QAAD,CAAtC;;AACA,QAAG,CAAC4B,QAAD,IAAaA,QAAQ,KAAK,CAA7B,EAAgC;AAC5BzB,MAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACAV,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACAE,MAAAA,UAAU,CAAC,KAAD,CAAV;AACA;AACH;;AACDsB,IAAAA,UAAU,CAACU,QAAD,CAAV;AACH,GAXD;;AAaE,SAAO;AACLnC,IAAAA,OADK;AAELE,IAAAA,SAFK;AAGLE,IAAAA,QAHK;AAIL8B,IAAAA;AAJK,GAAP;AAML,CApFD;;GAAMnC,W;;AAsFN,eAAeA,WAAf","sourcesContent":["import {useState} from 'react'\nimport axios from 'axios';\nimport getCurrentForecast from './helpers/getCurrentForecast';\nimport getAlertForecast from './helpers/getAlertForecast';\nimport getHourlyForecast from './helpers/getHourlyForecast';\nimport getDailyForecast from './helpers/getDailyForecast';\nimport getDetailCurrentForecast from './helpers/getDetailCurrentForecast';\n\nconst API_KEY = \"b96cf2201d3a30a9889082d993d5610e\";\nconst BASE_URL = \"https://api.openweathermap.org/data/2.5\"\n// const CROSS_URL = \"https://cors-anywhere.herokuapp.com\"\n// const REQUEST_URL = `${CROSS_URL}/${BASE_URL}`;\n\n\nconst useForecast = () => {\n\n    const [isError, setError] = useState(false);\n    const [isLoading, setLoading] = useState(false);\n    const [forecast, setForecast] = useState(null);\n    \n\n    const getCurrentLocationData = async (location) =>{\n        const allData = await axios(`${BASE_URL}/weather?q=${location}&units=metric&lang=fr&appid=${API_KEY}`);\n        if(!allData || allData.length === 0){\n            console.log('[error] getCurrentLocationData() line 25 in src/useForecast.js');\n            setLoading(false);\n            return;\n        }\n        const data = allData.data;\n        return {data};\n            \n    }\n    const getDetailLocationData = async (lat,lon) =>{\n\n        const detailData = await axios(`${BASE_URL}/onecall?units=metric&lat=${lat}&lon=${lon}&lang=fr&exclude=minutely&appid=${API_KEY}`);\n        if(!detailData || detailData.length === 0){\n            console.log('[error] getDetailLocationData() line 32 in src/useForecast.js');\n            setLoading(false);\n                 return;}\n        const data = detailData;\n        return {data};\n\n    }\n    const getLocationBase = async (location) => {\n        const cityData = await getCurrentLocationData(location); \n        if(!cityData.data || cityData.data.length === 0){\n            console.log('[error] getLocationBase line 41 line 50 in src/useForecast.js');\n            setLoading(false);\n            return;     \n        }\n        const current_data = cityData.data;\n        const Location_lat = cityData.data.coord.lat;\n        const Location_lon = cityData.data.coord.lon;\n        \n        const cityDetails= await getDetailLocationData(Location_lat,Location_lon); \n          if(!cityDetails.data || cityDetails.data.length === 0) return;\n        \n        const dataObject = {current_data : current_data, cityDetails : cityDetails.data.data};\n        return dataObject;\n    }\n\n    const deployData = (data) =>{\n        \n        const currentForecast = getCurrentForecast(data.current_data);\n        const hourlyForecast = getHourlyForecast(data.cityDetails.hourly);\n        const daylyForecast = getDailyForecast(data.cityDetails.daily);\n        const alertsForecast = getAlertForecast(data.cityDetails.alerts);\n        const detailCurrentForecast = getDetailCurrentForecast(data.cityDetails.daily[0]);\n\n        setForecast({\n            currentForecast,\n            hourlyForecast,\n            daylyForecast,\n            alertsForecast,\n            detailCurrentForecast\n        });\n        setLoading(false);\n    }\n    // on submit location recup DATA\n    const submitRequest = async location =>{\n        setLoading(true);\n        setError(false);\n        const response = await getLocationBase(location);\n        if(!response || response === 0) {\n            console.log('hi');\n            setError(true);\n            setLoading(false);\n            return;\n        }\n        deployData(response);\n    }\n\n      return {\n        isError,\n        isLoading,\n        forecast,\n        submitRequest\n    }\n}\n\nexport default useForecast\n"]},"metadata":{},"sourceType":"module"}