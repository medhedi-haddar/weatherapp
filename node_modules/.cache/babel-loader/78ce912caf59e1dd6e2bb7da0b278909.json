{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport axios from 'axios';\nimport getCurrentForecast from './helpers/getCurrentForecast';\nimport getAlertForecast from './helpers/getAlertForecast';\nimport getHourlyForecast from './helpers/getHourlyForecast';\nimport getDailyForecast from './helpers/getDailyForecast';\nimport getDetailCurrentForecast from './helpers/getDetailCurrentForecast'; // new key = 3bf3d393c0417e9f14c803b86d1a8fd7\n\nconst API_KEY = \"b96cf2201d3a30a9889082d993d5610e\";\nconst BASE_URL = \"https://api.openweathermap.org/data/2.5\";\n\nconst useForecast = () => {\n  _s();\n\n  const [isError, setError] = useState(false);\n  const [isLoading, setLoading] = useState(false);\n  const [forecast, setForecast] = useState(null);\n\n  const getCurrentLocationData = async location => {\n    try {\n      const allData = await axios(`${BASE_URL}/weather?q=${location}&lang=fr&units=metric&appid=${API_KEY}`);\n      const data = allData.data;\n      return {\n        data\n      };\n    } catch (error) {\n      return;\n    }\n  };\n\n  const getDetailLocationData = async (lat, lon) => {\n    try {\n      const detailData = await axios(`${BASE_URL}/onecall?units=metric&lat=${lat}&lon=${lon}&lang=fr&exclude=minutely&appid=${API_KEY}`);\n      const data = detailData;\n      return {\n        data\n      };\n    } catch (error) {\n      return;\n    }\n  };\n\n  const getLocationBase = async location => {\n    try {\n      const cityData = await getCurrentLocationData(location);\n      const current_data = cityData.data;\n      const Location_lat = cityData.data.coord.lat;\n      const Location_lon = cityData.data.coord.lon;\n\n      try {\n        const cityDetails = await getDetailLocationData(Location_lat, Location_lon);\n        const dataObject = {\n          current_data: current_data,\n          cityDetails: cityDetails.data.data\n        };\n        return dataObject;\n      } catch (error) {\n        return;\n      }\n    } catch (error) {\n      return;\n    }\n  };\n\n  const deployData = data => {\n    const currentForecast = getCurrentForecast(data.current_data);\n    const hourlyForecast = getHourlyForecast(data.cityDetails.hourly);\n    const daylyForecast = getDailyForecast(data.cityDetails.daily);\n    let alertsForecast = [];\n\n    if (data.cityDetails.alerts) {\n      const dataAlertForecast = getAlertForecast(data.cityDetails.alerts[0]);\n      alertsForecast = dataAlertForecast;\n    }\n\n    data.cityDetails.daily[0].humidity = data.current_data.main.humidity;\n    const detailCurrentForecast = getDetailCurrentForecast(data.cityDetails.daily[0]);\n    setForecast({\n      currentForecast,\n      hourlyForecast,\n      daylyForecast,\n      alertsForecast,\n      detailCurrentForecast\n    });\n    setLoading(false);\n  }; // on submit location recup DATA\n\n\n  const submitRequest = async location => {\n    setLoading(true);\n    setError(false);\n\n    try {\n      const response = await getLocationBase(location);\n      deployData(response);\n      localStorage.setItem('lastLocation', location);\n    } catch (error) {\n      setError(true);\n      setLoading(false);\n      return;\n    }\n  };\n\n  console.log(forecast);\n  return {\n    isError,\n    isLoading,\n    forecast,\n    submitRequest\n  };\n};\n\n_s(useForecast, \"98jJfAbkRG8B5Phem9UEdOko1FU=\");\n\nexport default useForecast;","map":{"version":3,"sources":["/Users/mohamedelhedihaddar/weather-app/src/useForecast.js"],"names":["useState","axios","getCurrentForecast","getAlertForecast","getHourlyForecast","getDailyForecast","getDetailCurrentForecast","API_KEY","BASE_URL","useForecast","isError","setError","isLoading","setLoading","forecast","setForecast","getCurrentLocationData","location","allData","data","error","getDetailLocationData","lat","lon","detailData","getLocationBase","cityData","current_data","Location_lat","coord","Location_lon","cityDetails","dataObject","deployData","currentForecast","hourlyForecast","hourly","daylyForecast","daily","alertsForecast","alerts","dataAlertForecast","humidity","main","detailCurrentForecast","submitRequest","response","localStorage","setItem","console","log"],"mappings":"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","sourcesContent":["import {useState} from 'react'\nimport axios from 'axios';\nimport getCurrentForecast from './helpers/getCurrentForecast';\nimport getAlertForecast from './helpers/getAlertForecast';\nimport getHourlyForecast from './helpers/getHourlyForecast';\nimport getDailyForecast from './helpers/getDailyForecast';\nimport getDetailCurrentForecast from './helpers/getDetailCurrentForecast';\n\n// new key = 3bf3d393c0417e9f14c803b86d1a8fd7\nconst API_KEY = \"b96cf2201d3a30a9889082d993d5610e\";\nconst BASE_URL = \"https://api.openweathermap.org/data/2.5\"\n\n\n\nconst useForecast = () => {\n\n    const [isError, setError] = useState(false);\n    const [isLoading, setLoading] = useState(false);\n    const [forecast, setForecast] = useState(null);\n    \n    const getCurrentLocationData = async (location) =>{\n        try {\n            const allData = await axios(`${BASE_URL}/weather?q=${location}&lang=fr&units=metric&appid=${API_KEY}`);\n            \n            const data = allData.data;\n            return {data};\n        } catch (error) {\n            return; \n        }       \n    }\n\n    const getDetailLocationData = async (lat,lon) =>{\n        try {\n            const detailData = await axios(`${BASE_URL}/onecall?units=metric&lat=${lat}&lon=${lon}&lang=fr&exclude=minutely&appid=${API_KEY}`);\n\n            const data = detailData;\n        return {data};\n        } catch (error) {\n            return;\n        }\n    }\n\n    const getLocationBase = async (location) => {\n        try {\n            const cityData = await getCurrentLocationData(location); \n\n            const current_data = cityData.data;\n            const Location_lat = cityData.data.coord.lat;\n            const Location_lon = cityData.data.coord.lon;\n            try {\n                const cityDetails= await getDetailLocationData(Location_lat,Location_lon);\n                \n                const dataObject = {current_data : current_data, cityDetails : cityDetails.data.data};\n                return dataObject;\n            } catch (error) {\n                return;\n            }\n        } catch (error) {\n            return; \n        }\n    }\n\n    const deployData = (data) =>{\n        \n        const currentForecast = getCurrentForecast(data.current_data);\n        const hourlyForecast = getHourlyForecast(data.cityDetails.hourly);\n        const daylyForecast = getDailyForecast(data.cityDetails.daily);\n\n        let alertsForecast = [];\n        if(data.cityDetails.alerts){\n            const dataAlertForecast = getAlertForecast(data.cityDetails.alerts[0]);\n            alertsForecast = dataAlertForecast;\n        }\n        data.cityDetails.daily[0].humidity = data.current_data.main.humidity;\n        const detailCurrentForecast = getDetailCurrentForecast(data.cityDetails.daily[0]);\n\n        setForecast({\n            currentForecast,\n            hourlyForecast,\n            daylyForecast,\n            alertsForecast,\n            detailCurrentForecast\n        });\n        setLoading(false);\n    }\n\n    // on submit location recup DATA\n    const submitRequest = async location =>{\n        setLoading(true);\n        setError(false);\n        try {\n            const response = await getLocationBase(location);\n            deployData(response);\n            localStorage.setItem('lastLocation', location);\n            \n        } catch (error) {\n            setError(true);\n            setLoading(false);\n            return;\n        }      \n    }\n    console.log(forecast);\n      return {\n        isError,\n        isLoading,\n        forecast,\n        submitRequest\n    }\n}\n\nexport default useForecast\n"]},"metadata":{},"sourceType":"module"}